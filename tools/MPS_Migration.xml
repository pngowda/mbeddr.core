<project name="mbeddr" default="migrateTask">
  <property name="environment" value="env" />
  <property name="artifacts.mps" location="${mps.home}" />
  <property name="env.JAVA_HOME" value="${java.home}/.." />
  <property name="jdk.home" value="${env.JAVA_HOME}" />
  <property name="mps_home" location="${mps.home}" />

  <path id="path.mps.ant.path">
	<pathelement location="${mps.home}/lib/ant/lib/ant-mps.jar" />
    <pathelement location="${mps.home}/lib/jdom.jar" />
    <pathelement location="${mps.home}/lib/log4j.jar" />
  </path>
  
  <target name="migrateTask" depends="declare-mps-tasks">
  	<record name="migration.log" action="start"/>
	<echo message="${mps.home}"/>
	<migrate project ="./mbeddr/tmp/allProject">
	<repository>
		<allmpsmodules/>
		<modules dir="${mps.home}/plugins"/>
		<modules dir="${mps.home}/lib"/>
	</repository>
	</migrate>
	<record name="migration.log" action="stop"/>
  </target>
  <target name="declare-mps-tasks">
    <taskdef resource="jetbrains/mps/build/ant/antlib.xml" classpathref="path.mps.ant.path" />
  </target>
    
</project>